# AnalysisData Directory

This directory contains analysis data for multiple repositories. The dashboard automatically discovers and loads all repositories placed in this folder.

## Directory Structure

Each repository should have its own subfolder containing analysis files:

```
AnalysisData/
├── .directories.json          # Auto-generated list of repositories
├── repository-1/
│   ├── commits.json           # Required: Commit history
│   ├── developer_rankings.json
│   ├── geographic_distribution.json
│   ├── techStack.json
│   ├── vulnerabilities.json
│   ├── complexity.json
│   └── *_code-analysis_*.csv  # Optional: Code analysis CSVs
├── repository-2/
│   ├── commits.json
│   └── ...
└── repository-3/
    ├── commits.json
    └── ...
```

## Adding a New Repository

1. **Copy your repository's analysis data** into a new folder:
   ```bash
   cp -r /path/to/analysis/results/my-repo ./AnalysisData/my-repo
   ```

2. **Regenerate the directory listing**:
   ```bash
   cd AnalysisDashboard
   python3 scripts/generate-directory-listing.py
   ```

3. **Refresh the dashboard** in your browser - the new repository will appear automatically!

## Removing a Repository

1. **Delete the repository folder**:
   ```bash
   rm -rf AnalysisData/old-repo
   ```

2. **Regenerate the directory listing**:
   ```bash
   python3 scripts/generate-directory-listing.py
   ```

3. **Refresh the dashboard** - the repository will no longer appear.

## How It Works

### Automatic Discovery

The dashboard discovers repositories in two ways:

1. **Primary Method**: Reads `AnalysisData/.directories.json` file
   - This file is auto-generated by the Python script
   - Lists all folders containing `commits.json`
   - Updated whenever you run `generate-directory-listing.py`

2. **Fallback Methods** (if .directories.json is missing):
   - Checks localStorage for previously discovered repositories
   - Accepts repository names via URL parameter: `?repos=repo1,repo2,repo3`

### Required Files

Each repository folder **must** contain:
- `commits.json` - Used to validate the repository exists

### Optional Files

Each repository folder **can** contain:
- `developer_rankings.json` - Developer scoring and metrics
- `geographic_distribution.json` - Geographic analysis
- `techStack.json` - Technology stack analysis
- `vulnerabilities.json` - Security vulnerabilities
- `complexity.json` - Code complexity metrics
- CSV files for detailed code analysis

## Troubleshooting

### Dashboard shows "No repositories found"

1. Check that you have folders in `AnalysisData/`
2. Verify each folder contains `commits.json`
3. Run the directory listing generator:
   ```bash
   python3 scripts/generate-directory-listing.py
   ```
4. Check browser console for error messages
5. Verify `.directories.json` was created successfully

### Repository not appearing after adding

1. Ensure the folder contains `commits.json`
2. Re-run the directory listing generator
3. Clear browser cache and refresh
4. Check browser console for errors

### .directories.json not updating

Make sure you run the script from the correct location:
```bash
cd AnalysisDashboard
python3 scripts/generate-directory-listing.py
```

## Manual Directory Listing

If you can't run the Python script, you can manually create `.directories.json`:

```json
{
  "directories": [
    "repository-1",
    "repository-2",
    "repository-3"
  ]
}
```

## Notes

- Repository folders can be added/removed at any time
- The system is fully dynamic - no code changes needed
- All repository names are automatically formatted for display
- The dashboard aggregates data across all discovered repositories

